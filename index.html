<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Congratulations P'Beer</title>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      /* ป้องกันการเลื่อนหน้าจอไปมา */
    }

    #container {
      text-align: center;
      width: 90%; /* เพิ่มพื้นที่ด้านข้างสำหรับมือถือ */
      max-width: 800px;
    }

    #hero-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: opacity 1s ease;
    }

    h1 {
      font-size: 1.8rem; /* ลดขนาดหัวข้อลงเล็กน้อยเพื่อให้พอดีบรรทัดในมือถือ */
      margin-bottom: 20px;
      color: #ffd700;
    }

    #clickable-image {
      width: 80%; /* ใช้ % เพื่อให้ยืดหยุ่นตามหน้าจอ */
      max-width: 300px;
      height: auto;
      border-radius: 15px;
      cursor: pointer;
      border: 2px solid #333;
      animation: float 3s ease-in-out infinite;
      transition: transform 0.3s;
    }

    /* Typing Section ปรับปรุงใหม่ */
    #typing-section {
      display: none;
      font-size: 1.1rem; /* ขนาดที่อ่านง่ายบนมือถือ */
      line-height: 1.8;
      opacity: 0;
      transition: opacity 1s ease;
      word-wrap: break-word; /* บังคับให้ตัดคำ */
      text-align: left; /* จัดชิดซ้ายเพื่อให้อ่านง่ายขึ้นในหน้าจอมือถือ */
      max-height: 80vh; /* จำกัดความสูง */
      overflow-y: auto; /* ถ้าข้อความยาวเกินไปให้เลื่อนอ่านได้ */
    }

    .cursor {
      display: inline-block;
      width: 8px;
      background-color: #ffd700;
      margin-left: 5px;
      animation: blink 1s infinite;
    }

    #click-anywhere-hint {
      display: none;
      font-size: 0.8rem;
      color: #888;
      text-align: center;
      margin-top: 20px;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .fade-out { opacity: 0 !important; }
    .fade-in { opacity: 1 !important; }
  </style>
</head>

<body>

  <div id="container">
    <div id="hero-section">
      <h1>Congratulations to P'Nan and P'Beer</h1>
      <img src="image/friends.png" id="clickable-image" alt="Celebration Image">
      <p class="hint">Click the image to open</p>
    </div>

    <div id="typing-section">
      <div id="text-content"></div><span id="cursor" class="cursor">&nbsp;</span>
      <div id="click-anywhere-hint" class="hint">Tap anywhere to continue</div>
    </div>
  </div>

  <script>
    const heroSection = document.getElementById('hero-section');
    const typingSection = document.getElementById('typing-section');
    const textContent = document.getElementById('text-content');
    const clickableImage = document.getElementById('clickable-image');
    const clickHint = document.getElementById('click-anywhere-hint');

    const message = "สวัสดีบัณฑิตพี่เบียร์และพี่นันท์ครับ ส่งข้อความนี้มาร่วมแสดงความยินดีย้อนหลังในวันสำเร็จการศึกษานะครับ ขอให้พี่เบียร์และพี่นันท์ประสบความสำเร็จในทุกๆด้านของชีวิต ทั้งการงานและชีวิตส่วนตัว มีความสุขมากที่สุดในโลกกก สุขภาพร่างกายแข็งแรงวิ่งมาราธอนได้ชิล และขอให้ทุกความฝันที่ตั้งใจไว้เป็นจริงนะครับ ยินดีด้วยจากใจจริงครับ ขออภัยจริงๆครับที่ไม่ได้ไปร่วมงาน แล้วก็ขอโทษในเรื่องที่เกิดขึ้นก่อนหน้านี้ ทำให้ยังไม่สามารถสู้หน้าเพื่อนๆ แล้วอยู่ในกลุ่มแชทได้ ขอโทษที่ทำตัวไม่ดีครับ ฟิล์มไม่ได้หายไปไหนนะครับ ยังพบเจอได้ พูดคุยได้เหมือนเดิม ขอบคุณครับที่ให้โอกาสกับฟิล์ม ขอบคุณจริงๆ";

    let isTypingFinished = false;

    clickableImage.addEventListener('click', () => {
      heroSection.classList.add('fade-out');
      setTimeout(() => {
        heroSection.style.display = 'none';
        typingSection.style.display = 'block';
        setTimeout(() => {
          typingSection.classList.add('fade-in');
          startTyping();
        }, 1000);
      }, 1000);
    });

    function startTyping() {
      let i = 0;
      const speed = 40; 

      function type() {
        if (i < message.length) {
          textContent.textContent += message.charAt(i);
          i++;
          // เลื่อนหน้าจอลงอัตโนมัติขณะพิมพ์ (กรณีข้อความยาวในมือถือ)
          typingSection.scrollTop = typingSection.scrollHeight;
          setTimeout(type, speed);
        } else {
          isTypingFinished = true;
          clickHint.style.display = 'block'; // แสดงคำแนะนำให้คลิก
          // เพิ่ม Event Listener เพื่อรอการคลิกจาก User
          window.addEventListener('click', handleUserClick);
          window.addEventListener('touchstart', handleUserClick);
        }
      }
      type();
    }

    function handleUserClick() {
      if (isTypingFinished) {
        // ลบ Listener เพื่อไม่ให้ทำงานซ้ำ
        window.removeEventListener('click', handleUserClick);
        window.removeEventListener('touchstart', handleUserClick);
        finishSequence();
      }
    }

    function finishSequence() {
      typingSection.classList.remove('fade-in');
      typingSection.classList.add('fade-out');

      setTimeout(() => {
        typingSection.innerHTML = "<h1 style='text-align:center;'>Thx for watching</h1>";
        typingSection.classList.remove('fade-out');
        typingSection.classList.add('fade-in');
      }, 1000);
    }
  </script>
</body>

</html>
